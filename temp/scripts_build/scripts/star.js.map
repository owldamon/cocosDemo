{"version":3,"sources":["assets\\scripts\\star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","onLoad","getPlayerDistance","playerPos","game","player","getPosition","dist","pDistance","node","position","onPicker","spawnNewStar","destroy","update","dt","onPicked","opacityRatio","timer","starDuration","minOpacity","opacity","Math","floor","gainScore"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,gBAAY;;AADF,GAHL;;AAQP;AACAC,UAAQ,kBAAW,CAElB,CAXM;AAYPC,qBAAmB,6BAAW;AAC5B,QAAIC,YAAY,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,WAAjB,EAAhB;AACA,QAAIC,OAAOZ,GAAGa,SAAH,CAAa,KAAKC,IAAL,CAAUC,QAAvB,EAAiCP,SAAjC,CAAX;AACA,WAAOI,IAAP;AACD,GAhBM;AAiBPI,YAAU,oBAAW;AACnB,SAAKP,IAAL,CAAUQ,YAAV;AACA,SAAKH,IAAL,CAAUI,OAAV;AACD,GApBM;AAqBPC,UAAQ,gBAASC,EAAT,EAAa;AACnB,QAAI,KAAKb,iBAAL,KAA2B,KAAKF,UAApC,EAAgD;AAC9C,WAAKgB,QAAL;AACA;AACD;AACD,QAAIC,eAAe,IAAI,KAAKb,IAAL,CAAUc,KAAV,GAAkB,KAAKd,IAAL,CAAUe,YAAnD;AACA,QAAIC,aAAa,EAAjB;AACA,SAAKX,IAAL,CAAUY,OAAV,GAAoBD,aAAaE,KAAKC,KAAL,CAAWN,gBAAgB,MAAMG,UAAtB,CAAX,CAAjC;AACD,GA7BM;AA8BPJ,YAAU,oBAAW;AACnB,SAAKZ,IAAL,CAAUQ,YAAV;AACA,SAAKR,IAAL,CAAUoB,SAAV;AACA,SAAKf,IAAL,CAAUI,OAAV;AACD;;AAlCM,CAAT","file":"unknown","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    pickRadius: 0,\r\n\r\n  },\r\n\r\n  // use this for initialization\r\n  onLoad: function() {\r\n\r\n  },\r\n  getPlayerDistance: function() {\r\n    var playerPos = this.game.player.getPosition();\r\n    var dist = cc.pDistance(this.node.position, playerPos);\r\n    return dist;\r\n  },\r\n  onPicker: function() {\r\n    this.game.spawnNewStar();\r\n    this.node.destroy();\r\n  },\r\n  update: function(dt) {\r\n    if (this.getPlayerDistance() < this.pickRadius) {\r\n      this.onPicked();\r\n      return;\r\n    }\r\n    var opacityRatio = 1 - this.game.timer / this.game.starDuration;\r\n    var minOpacity = 50;\r\n    this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\r\n  },\r\n  onPicked: function() {\r\n    this.game.spawnNewStar();\r\n    this.game.gainScore();\r\n    this.node.destroy();\r\n  },\r\n\r\n\r\n});"]}