{"version":3,"sources":["star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","onLoad","getPlayerDistance","playerPos","game","player","getPosition","dist","pDistance","node","position","onPicker","spawnNewStar","destroy","update","dt","onPicked","gainScore","opacityRatio","timer","starDuration","minOpacity","opacity","Math","floor"],"mappings":";;;;;;;;AAAAA,GAAGC,KAAH;AACEC,WAASF,GAAGG,SADd;;AAGEC,cAAY;AACVC,gBAAY;;AADF,GAHd;;AAQE;AACAC,UAAQ,kBAAW,CAElB,CAXH;AAYEC,qBAAmB,6BAAW;AAC5B,QAAIC,YAAY,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,WAAjB,EAAhB;AACA,QAAIC,OAAOZ,GAAGa,SAAH,CAAa,KAAKC,IAAL,CAAUC,QAAvB,EAAiCP,SAAjC,CAAX;AACA,WAAOI,IAAP;AACD,GAhBH;AAiBEI,YAAU,oBAAW;AACnB,SAAKP,IAAL,CAAUQ,YAAV;AACA,SAAKH,IAAL,CAAUI,OAAV;AACD,GApBH;AAqBEC,UAAQ,gBAASC,EAAT,EAAa;AACnB,QAAI,KAAKb,iBAAL,KAA2B,KAAKF,UAApC,EAAgD;AAC9C,WAAKgB,QAAL;AACA;AACD;AACF,GA1BH;AA2BEA,YAAU,oBAAW;AACnB,SAAKZ,IAAL,CAAUQ,YAAV;AACA,SAAKR,IAAL,CAAUa,SAAV;AACA,SAAKR,IAAL,CAAUI,OAAV;AACD;;AA/BH,aAmCU,gBAASE,EAAT,EAAa;AACnB,MAAIG,eAAe,IAAI,KAAKd,IAAL,CAAUe,KAAV,GAAkB,KAAKf,IAAL,CAAUgB,YAAnD;AACA,MAAIC,aAAa,EAAjB;AACA,OAAKZ,IAAL,CAAUa,OAAV,GAAoBD,aAAaE,KAAKC,KAAL,CAAWN,gBAAgB,MAAMG,UAAtB,CAAX,CAAjC;AACD,CAvCH","file":"unknown","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    pickRadius: 0,\r\n\r\n  },\r\n\r\n  // use this for initialization\r\n  onLoad: function() {\r\n\r\n  },\r\n  getPlayerDistance: function() {\r\n    var playerPos = this.game.player.getPosition();\r\n    var dist = cc.pDistance(this.node.position, playerPos);\r\n    return dist;\r\n  },\r\n  onPicker: function() {\r\n    this.game.spawnNewStar();\r\n    this.node.destroy();\r\n  },\r\n  update: function(dt) {\r\n    if (this.getPlayerDistance() < this.pickRadius) {\r\n      this.onPicked();\r\n      return;\r\n    }\r\n  },\r\n  onPicked: function() {\r\n    this.game.spawnNewStar();\r\n    this.game.gainScore();\r\n    this.node.destroy();\r\n  },\r\n\r\n\r\n  // called every frame, uncomment this function to activate update callback\r\n  update: function(dt) {\r\n    var opacityRatio = 1 - this.game.timer / this.game.starDuration;\r\n    var minOpacity = 50;\r\n    this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\r\n  },\r\n});"]}